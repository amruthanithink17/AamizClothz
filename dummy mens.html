<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Men's Fashion - AmizClothz</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    /* (trimmed CSS â€” keep your original styles) */
    body{font-family:Poppins, sans-serif;background:#f9f9f9}
    .container{max-width:1200px;margin:0 auto;padding:20px}
    header{background:#fff;padding:10px 0;box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .top-header{display:flex;align-items:center;justify-content:space-between}
    .cart-count{position:relative;display:inline-flex;align-items:center;justify-content:center;
      width:20px;height:20px;border-radius:50%;background:#ff006e;color:#fff;font-size:12px;margin-left:6px}
    .products{display:grid;grid-template-columns:repeat(auto-fit, minmax(240px,1fr));gap:20px;margin-top:20px}
    .product-card{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .product-img img{width:100%;height:220px;object-fit:cover;display:block}
    .product-info{padding:16px}
    .price{font-weight:700;color:#3a86ff}
    .add-to-cart{background:#3a86ff;color:#fff;border:0;width:40px;height:40px;border-radius:50%;cursor:pointer}
    .toast{position:fixed;right:20px;bottom:20px;background:#28a745;color:#fff;padding:12px 18px;border-radius:6px;opacity:0;transform:translateY(20px);transition:all .25s}
    .toast.show{opacity:1;transform:translateY(0)}
    .flying-img{position:fixed;z-index:2000;pointer-events:none;transition:all 0.9s cubic-bezier(.2,.9,.2,1);border-radius:6px}
  </style>
</head>
<body>
  <header>
    <div class="container top-header">
      <a href="#" class="logo"><strong>Amiz<span style="color:#ff006e">Clothz</span></strong></a>
      <div>
        <a href="cart.html" class="icon-link">
          <i class="fas fa-shopping-cart"></i> Cart
          <span class="cart-count" id="cartCount">0</span>
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <h1>Men's Collection</h1>

    <div class="products">
      <!-- PRODUCT 1 -->
      <div class="product-card" data-id="1">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?auto=format&fit=crop&w=800&q=80" alt="Classic Denim Jacket">
        </div>
        <div class="product-info">
          <h3>Classic Denim Jacket</h3>
          <p>Perfect for casual outings and everyday wear.</p>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div class="price">$79.99</div>
            <button
              class="add-to-cart"
              data-id="1"
              data-name="Classic Denim Jacket"
              data-price="79.99"
              data-img="https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?auto=format&fit=crop&w=800&q=80"
              title="Add to cart"
            >
              <i class="fa fa-shopping-cart"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- PRODUCT 2 -->
      <div class="product-card" data-id="2">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1598033129183-c4f50c736f10?auto=format&fit=crop&w=800&q=80" alt="Slim Fit Dress Shirt">
        </div>
        <div class="product-info">
          <h3>Slim Fit Dress Shirt</h3>
          <p>Premium cotton shirt for formal occasions.</p>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div class="price">$59.99</div>
            <button
              class="add-to-cart"
              data-id="2"
              data-name="Slim Fit Dress Shirt"
              data-price="59.99"
              data-img="https://images.unsplash.com/photo-1598033129183-c4f50c736f10?auto=format&fit=crop&w=800&q=80"
              title="Add to cart"
            >
              <i class="fa fa-shopping-cart"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- PRODUCT 3 -->
      <div class="product-card" data-id="3">
        <div class="product-img">
          <img src="https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?auto=format&fit=crop&w=900&q=80" alt="Casual Sneakers">
        </div>
        <div class="product-info">
          <h3>Casual Sneakers</h3>
          <p>Comfortable and stylish everyday footwear.</p>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div class="price">$89.99</div>
            <button
              class="add-to-cart"
              data-id="3"
              data-name="Casual Sneakers"
              data-price="89.99"
              data-img="https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?auto=format&fit=crop&w=900&q=80"
              title="Add to cart"
            >
              <i class="fa fa-shopping-cart"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- (add more products similarly, make sure each button has unique data-id/data-name/data-price/data-img) -->
    </div>
  </main>

  <div id="toast" class="toast">Added to cart</div>

  <script>
    // Helper - load & save cart
    function loadCart() {
      try {
        return JSON.parse(localStorage.getItem('cart')) || [];
      } catch (e) {
        return [];
      }
    }
    function saveCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
      updateHeaderCount();
    }

    const cartCountEl = document.getElementById('cartCount');
    function updateHeaderCount() {
      const cart = loadCart();
      const totalQty = cart.reduce((s, it) => s + (it.qty || 0), 0);
      cartCountEl.textContent = totalQty;
    }

    // toast
    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 1600);
    }

    // Fly-to-cart animation
    function flyToCart(imgEl) {
      const cartIcon = document.querySelector('.fa-shopping-cart');
      if (!imgEl || !cartIcon) return;
      const clone = imgEl.cloneNode(true);
      clone.classList.add('flying-img');
      const rect = imgEl.getBoundingClientRect();
      clone.style.top = rect.top + 'px';
      clone.style.left = rect.left + 'px';
      clone.style.width = rect.width + 'px';
      clone.style.height = rect.height + 'px';
      document.body.appendChild(clone);

      const cartRect = cartIcon.getBoundingClientRect();
      // animate
      requestAnimationFrame(() => {
        clone.style.top = cartRect.top + 'px';
        clone.style.left = cartRect.left + 'px';
        clone.style.width = '30px';
        clone.style.height = '30px';
        clone.style.opacity = '0.6';
      });

      clone.addEventListener('transitionend', () => clone.remove(), {once:true});
    }

    // Add to cart handler
    document.querySelectorAll('.add-to-cart').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const id = btn.dataset.id;
        const name = btn.dataset.name;
        const price = parseFloat(btn.dataset.price);
        const img = btn.dataset.img;

        if (!id || !name || isNaN(price)) {
          console.warn('missing product data', {id, name, price});
          return;
        }

        let cart = loadCart();
        const existing = cart.find(item => item.id === id);
        if (existing) {
          existing.qty = (existing.qty || 0) + 1;
        } else {
          cart.push({ id, name, price, img, qty: 1 });
        }

        saveCart(cart);
        // animate & toast
        const productCard = btn.closest('.product-card');
        const productImg = productCard && productCard.querySelector('img');
        flyToCart(productImg);
        showToast(`${name} added to cart`);
      });
    });

    // init count on load
    updateHeaderCount();

    // keep header in sync between tabs
    window.addEventListener('storage', (e) => {
      if (e.key === 'cart') updateHeaderCount();
    });
  </script>
</body>
</html>
